import{_ as t,u as e,r as l,a,c as o,b as i,H as n,F as s,h as r,j as c,i as u}from"./vendor.18b10b7e.js";const h={methods:{settlement(){this.$axios.get("/calling/closeOrder/"+this.o_id).then((t=>{})).catch((e=>{console.log("login err",e),t.error("读取失败"+e)})),this.$axios.get("/calling/updateOrder/"+this.o_id+"/"+this.value+"/"+this.totalPrice).then((t=>{alert("success")})).catch((e=>{console.log("login err",e),t.error("读取失败"+e)})),this.$router.push({name:"MerchantMain"})},show(){for(let t in this.content);},remove(t){if(0!=t.count){let l,a,o,i;t.count--;try{l=this.totalPrice.toString().split(".")[1].length}catch(e){l=0}try{a=t.price.toString().split(".")[1].length}catch(e){a=0}o=Math.pow(10,Math.max(l,a)),i=l>=a?l:a,this.totalPrice=((this.totalPrice*o-t.price*o)/o).toFixed(i)}},add(t){let e,l,a;t.count++;try{e=this.totalPrice.toString().split(".")[1].length}catch(o){e=0}try{l=t.price.toString().split(".")[1].length}catch(o){l=0}a=Math.pow(10,Math.max(e,l)),this.totalPrice=(this.totalPrice*a+t.price*a)/a,t.name,1==t.count?this.content.name=t.count:this.content[t.name]=t.count}},created(){const l=this;this.c_id=this.$route.params.c_id,this.o_id=this.$route.params.o_id,this.$axios.get("/calling/findOrder/"+e().state.users).then((t=>{l.tableData=t.data})).catch((e=>{console.log("login err",e),t.error("读取失败"+e)})),this.value=this.options[0].value},data:()=>({totalPrice:0,total:0,c_id:null,o_id:null,value:null,content:null,tableData:null,options:[{value:0,label:"现金支付"},{value:1,label:"微信支付"},{value:2,label:"支付宝支付"},{value:3,label:"刷银行卡支付"},{value:4,label:"刷信用卡支付"},{value:5,label:"其他支付"}]})},d=i("h1",{style:{"text-align":"center","font-size":"50px"}},"点单",-1),p=c("结算");h.render=function(t,e,h,f,g,m){const b=l("el-header"),v=l("el-table-column"),_=l("el-button"),x=l("el-table"),y=l("el-main"),P=l("el-option"),k=l("el-select"),w=l("el-tag"),M=l("el-footer"),$=l("el-affix"),C=l("el-container");return a(),o("div",null,[i(C,null,{default:n((()=>[i(b,null,{default:n((()=>[d])),_:1}),i(y,null,{default:n((()=>[i(x,{data:g.tableData,stripe:"",style:{width:"100%"}},{default:n((()=>[i(v,{prop:"name",label:"菜名"}),i(v,{prop:"price",label:"单价(元)"}),i(v,{prop:"count",label:"数量"}),i(v,null,{default:n((t=>[i(_,{icon:"el-icon-minus",onClick:e=>m.remove(t.row)},null,8,["onClick"]),i(_,{icon:"el-icon-plus",onClick:e=>m.add(t.row)},null,8,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),i($,{position:"bottom",offset:20},{default:n((()=>[i(M,{height:"10%"},{default:n((()=>[i("div",null,[i(_,{type:"primary",style:{float:"right","font-size":"20px"},onClick:e[1]||(e[1]=t=>m.settlement())},{default:n((()=>[p])),_:1}),i(k,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=t=>g.value=t),placeholder:"请选择",style:{float:"right"}},{default:n((()=>[(a(!0),o(s,null,r(g.options,(t=>(a(),o(P,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),i(w,{style:{float:"left","font-size":"30px"}},{default:n((()=>[c("总价："+u(g.totalPrice)+"元",1)])),_:1})])])),_:1})])),_:1})])),_:1})])};export{h as default};
